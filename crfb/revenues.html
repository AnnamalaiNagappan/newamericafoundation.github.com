<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Revenue</title>
<link charset="utf-8" href="style.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script type="text/javascript" src="js/highcharts.js"></script>
<script type="text/javascript" src="js/modules/exporting.js"></script>
<script>
var chart;
$(document).ready(function() {
   var gdpPercent = {'Individual income taxes':'7.5% of GDP','Corporate income taxes':'1.6% of GDP','Payroll taxes':'5.8% of GDP','Other':'1.4% of GDP'};
   chart = new Highcharts.Chart({
      chart: {
         renderTo: 'container',
         plotBackgroundColor: null,
         plotBorderWidth: null,
         plotShadow: false
      },
      title: {
         text: 'Revenues'
      },
	   credits: {
        text: 'NewAmerica.net',
        href: 'http://newamerica.net'
      },
      tooltip: {
         formatter: function() {
			console.log(this);
		    var s = '<b>'+ this.point.name +'</b>: '+ '$' + Highcharts.numberFormat(this.y, 0, ',') + ' billion';
			$('#graphCaption').empty();
			$('#graphCaption').append('<p>'+gdpPercent[this.point.name]+'</p>');
//            $.each(this.points, function(i, point) {
//                s += '<br/>'+ point.name +': '+point.y +'%';
//            });
            return s;
//            return '<b>'+ this.point.name +'</b>: '+ '$' + this.y + ' billion';
         }
      },
      plotOptions: {
         pie: {
            allowPointSelect: true,
            cursor: 'pointer',
            dataLabels: {
               enabled: true,
               formatter: function() {
                  return '<b>'+ this.point.name +'</b>';
               }
            }
         }
      },
       series: [{
         type: 'pie',
         name: 'Revenue',
         data: [
            ['Individual income taxes',   1159],
            ['Corporate income taxes',       251],
            ['Payroll taxes',    895],
            ['Other',   218]
         ]
      }]
   });
});
</script>
</head>
<body class="revenue">
<div style="width:800px;">
<div id="container" style="width: 600px; height: 250px; margin: 0 auto"></div>
<div id="graphCaption" style="width: 180px; margin: 0 auto"><p>This is intro text.</p></div>
</div>
</body>
</html>