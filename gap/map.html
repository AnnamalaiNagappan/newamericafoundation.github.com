<html>
<head>
	 
  <link rel="stylesheet" href="css/bootstrap.css" media="all" />
 <link href='css/style.css' rel='stylesheet' type='text/css' />
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
  <script src='js/modestmaps.min.js' type='text/javascript'></script>
  <script src='js/wax.mm.js' type='text/javascript'></script>
  <script src='js/easey.js' type='text/javascript'></script>
  <script src='js/mapInit.js' type='text/javascript'></script>
  <!--<script type="text/javascript" src="scripts/highcharts/highcharts.js"></script>
  <script type="text/javascript" src="scripts/highcharts/themes/transparent.js"></script>-->
  <script src='js/jquery.flot.min.js' type='text/javascript'></script>


	<script src="js/bootstrap.js"></script>
	<script src="js/bootstrap-twipsy.js"></script>
	<script src="js/bootstrap-popover.js"></script>
	<script src="js/bootstrap-dropdown.js"></script>
	<script src="js/bootstrap-scrollspy.js"></script>
	<script src="js/jquery/jquery.tablesorter.min.js"></script>
  <!-- <script type="text/javascript" src="scripts/default-tooltip.js"></script>-->

  <!-- <link href='styles/controls.css' rel='stylesheet' type='text/css' /> -->
<script>
buildMap('http://a.tiles.mapbox.com/v3/newamerica.gssp.jsonp', 'mainMap');

	var options = {
	    xaxis: {
	        font: { "family": "Georgia" },
	        tickColor: '#000',
	        tickSize: 1,
	        tickDecimals: 0,
			show: false
	    },
	    yaxis: {
	        // tickFormatter: function() { return ''; },
	        tickColor: '#f4f4f4',
	        autoscaleMargin: 0.1
	    },
	    series: {
	        lines: {
	            show: false,
	            lineWidth: 0.5,
	            fillColor: '#000000'
	        },
	        points: {
	            show: false,
	            fillColor: '#f69680',
	            radius: 4,
	            lineWidth: 2
	        },
			bars: {
	            show: true,
	            lineWidth: 0,
	            fillColor: '#cccccc'
	        },
	        shadowSize: 0
	    },
	    colors: ["#0064CD"],
	    grid: {
	        show: true,
	        borderWidth: 0,
	        hoverable: true,
	        clickable: true
	     }
	};
	
			//Main fake data object. Use this to build the individual graphs
			var countryLabels = [[0,'Argentina'],[1,'Bangladesh'],[2,'Bolivia'],[3,'Botswana'],[4,'Brazil'],[5,'Brunei'],[6,'Burkina Faso'],[7,'Cambodia'],[8,'Chile'],[9,'China'],[10,'Colombia'],[11,'Costa Rica'],[12,'Dominican Republic'],[13,'Ecuador'],[14,'Egypt'],[15,'El Salvador'],[16,'Ethiopia'],[17,'Ghana'],[18,'Guatemala'],[19,'Honduras'],[20,'India'],[21,'Indonesia'],[22,'Jamaica'],[23,'Kenya'],[24,'Lesotho'],[25,'Liberia'],[26,'Malawi'],[27,'Maldives'],[28,'Mali'],[29,'Maurituis'],[30,'Mexico'],[31,'Mongolia'],[32,'Mozambique'],[33,'Namibia'],[34,'Nepal'],[35,'Nicaragua'],[36,'Pakistan'],[37,'Panama'],[38,'Paraguay'],[39,'Peru'],[40,'Phillipines'],[41,'Rwanda'],[42,'Sierra Leone'],[43,'South Africa'],[44,'Swaziland'],[45,'Tanzania'],[46,'Thailand'],[47,'Trinidad and Tobago'],[48,'Uganda'],[49,'Urugauy'],[50,'Zambia']]
			
			
			var dataLabels = [[0,'Composite Access to Financial Services', 'http://a.tiles.mapbox.com/v3/newamerica.gssp-comaccess.jsonp'],[1,'Financial Literacy','http://a.tiles.mapbox.com/v3/newamerica.gssp-fl.jsonp'],[2,'Mobile Penetration','http://a.tiles.mapbox.com/v3/newamerica.gssp-mobile.jsonp'],[3,'Commerical Banks per 1,000 SQ KM','http://a.tiles.mapbox.com/v3/newamerica.gssp-com-sqm.jsonp'],[4,'Commerical Banks per 100,000 adults','http://a.tiles.mapbox.com/v3/newamerica.gssp-com-adults.jsonp'],[5,'Alternative Financial Institutions 1,000 SQ KM','http://a.tiles.mapbox.com/v3/newamerica.gssp-alt-sqkm.jsonp'],[6,'Alternative Financial Institutions per 100,000 adults','http://a.tiles.mapbox.com/v3/newamerica.gssp-alt-adults.jsonp'],[7,'ATM per 1,000 SQ KM','http://a.tiles.mapbox.com/v3/newamerica.gssp-atm-sqkm.jsonp'],[8,'ATM per 100,000 adults','http://a.tiles.mapbox.com/v3/newamerica.gssp-atm-adults.jsonp'],[9,'POS per thousand SQ KM','http://a.tiles.mapbox.com/v3/newamerica.gssp-pos-sqkm.jsonp'],[10,'POS per 100,000 adults','http://a.tiles.mapbox.com/v3/newamerica.gssp-pos-adults.jsonp']]
			
			var data = {
				//Composite Access to Financial Services
					0:[[0,0.28],[1,0.32],[2,0.3],[3,0.47],[4,0.43],[5,0],[6,0.26],[7,0.2],[8,0.6],[9,0.42],[10,0.41],[11,0.29],[12,0.29],[13,0.35],[14,0.41],[15,0.26],[16,0.14],[17,0.16],[18,0.32],[19,0.25],[20,0.48],[21,0.4],[22,0.59],[23,0.1],[24,0.17],[25,0.11],[26,0.21],[27,0],[28,0.22],[29,0.6],[30,0.25],[31,0.25],[32,0.12],[33,0.28],[34,0.2],[35,0.05],[36,0.12],[37,0.46],[38,0.3],[39,0.26],[40,0.26],[41,0.23],[42,0.13],[43,0.46],[44,0.35],[45,0.05],[46,0.59],[47,0.53],[48,0.2],[49,0.42],[50,0.15]],
					
					//Financial Literacy
						1:[[0,0.28],[1,0.32],[2,0.3],[3,0.47],[4,0.43],[5,0],[6,0.26],[7,0.2],[8,0.6],[9,0.42],[10,0.41],[11,0.29],[12,0.29],[13,0.35],[14,0.41],[15,0.26],[16,0.14],[17,0.16],[18,0.32],[19,0.25],[20,0.48],[21,0.4],[22,0.59],[23,0.1],[24,0.17],[25,0.11],[26,0.21],[27,0],[28,0.22],[29,0.6],[30,0.25],[31,0.25],[32,0.12],[33,0.28],[34,0.2],[35,0.05],[36,0.12],[37,0.46],[38,0.3],[39,0.26],[40,0.26],[41,0.23],[42,0.13],[43,0.46],[44,0.35],[45,0.05],[46,0.59],[47,0.53],[48,0.2],[49,0.42],[50,0.15]],	
			
	//Mobile penetration
	2:[[0,0.90772241104646],[1,0.53894878538604],[2,0.53522406641517],[3,0.8054244212954],[4,0.87147933528388],[5,1.13820638820639],[6,0.2460148121262],[7,0.37983915981518],[8,0.90457226502425],[9,0.59582694773584],[10,0.77249684150056],[11,0.37569191546617],[12,0.67609537546243],[13,0.92751947150742],[14,0.65434376745282],[15,0.94337984861204],[16,0.041671533980582],[17,0.61759616126783],[18,0.82312542561917],[19,0.77368777394604],[20,0.58131141610509],[21,0.82677658946552],[22,0.74838691411002],[23,0.41526860485035],[24,0.43427767804118],[25,0.49004339488326],[26,0.20215040808056],[27,0.83101371791212],[28,0.29212495805743],[29,0.75120422752544],[30,0.71101494317968],[31,0.60485446536452],[32,0.19004310851964],[33,0.83760344829661],[34,0.12751371240788],[35,0.55562512268295],[36,0.57153672586765],[37,0.96930343153218],[38,0.79249019750421],[39,0.70662819557294],[40,0.86588140016943],[41,0.35593264848774],[42,0.42339816896909],[43,0.6740851939987],[44,0.58324939792983],[45,0.44948886202179],[46,0.82109623450018],[47,1.219609375],[48,0.45756148656646],[49,0.89914325276192],[50,0.42283952382647]],
	
	//Commerical banks per thousand sq m
	3:[[0,1.434945],[1,43.14358],[2,0.391929],[3,0.1782154],[4,2.123313],[5,0],[6,0.5445907],[7,2.15273],[8,2.564103],[9,0],[10,4.044164],[11,15.19781],[12,13.82803],[13,0.538217],[14,0],[15,18.43629],[16,0.631],[17,3.217017],[18,26.04445],[19,0.589865],[20,26.46114],[21,7.086119],[22,11.54201],[23,1.699055],[24,0.8566722],[25,0.4152824],[26,1.753826],[27,0],[28,0.2024275],[29,96.55173],[30,5.692533],[31,0.6664539],[32,0.4476207],[33,0.1166053],[34,5.258741],[35,0],[36,11.72816],[37,5.951901],[38,0.6972061],[39,1.140625],[40,23.52349],[41,4.256182],[42,1.019268],[43,2.221545],[44,1.162791],[45,0.4888237],[46,11.36448],[47,0],[48,1.846778],[49,1.851217],[50,0.3322617]],

	//Commerical Banks per (100,000 adults) 
	4:[[0,13.19966],[1,5.164976],[2,6.936719],[3,7.996997],[4,12.70611],[5,0],[6,1.8197],[7,3.924215],[8,14.91534],[9,0],[10,14.30221],[11,23.30158],[12,9.975554],[13,1.613173],[14,0],[15,9.298369],[16,1.392583],[17,5.114913],[18,35.75176],[19,1.469866],[20,10.10775],[21,7.741735],[22,6.637127],[23,4.384016],[24,2.119042],[25,1.84793],[26,2.156942],[27,0],[28,3.48481],[29,20.10816],[30,14.66588],[31,53.98829],[32,2.888864],[33,7.250611],[34,4.189821],[35,0],[36,8.682724],[37,18.52384],[38,6.784743],[39,7.30865],[40,11.81343],[41,1.868745],[42,2.313988],[43,8.003472],[44,2.85203],[45,1.841811],[46,11.0404],[47,0],[48,2.254612],[49,12.62473],[50,3.641129]],
	//Alternative Financial Institutions (per 1000 sq m)
	5:[[0,0.0010962],[1,30.16824],[2,0.406684],[3,0.0511707],[4,0.7654189],[5,0],[6,1.421784],[7,0],[8,0.7104701],[9,0],[10,0.2226228],[11,5.5424988],[12,3.9479124],[13,0.4623609],[14,0],[15,1.592664],[16,0.465],[17,1.995254],[18,0],[19,0.5273036],[20,7.284768],[21,0.5282711],[22,4.339797],[23,0.0087852],[24,0.3953871],[25,0],[26,0],[27,0],[28,0.8572435],[29,0],[30,1.3117622],[31,0],[32,0.1551413],[33,0],[34,4.188810999999999],[35,0],[36,2.6177877],[37,1.6659948],[38,0],[39,1.1703125],[40,2.7534626],[41,0],[42,0.0558503],[43,0],[44,0.5232558],[45,0],[46,0],[47,0],[48,0.3855911],[49,0.0514227],[50,0.1802553]],

	//Alternative Financial Institutions (coops + SSFIs + MFI)
	6:[[0,0.0100838],[1,3.61162],[2,7.197866],[3,2.296168],[4,4.5803419],[5,0],[6,4.75076],[7,0],[8,4.132792],[9,0],[10,0.7873068],[11,8.4978708],[12,2.8480283],[13,1.3858129],[14,0],[15,0.8032623],[16,1.0262298],[17,3.172364],[18,0],[19,1.3139711],[20,2.78267],[21,0.5771473],[22,2.49556],[23,0.0226681],[24,0.9780195],[25,0],[26,0],[27,0],[28,14.75753],[29,0],[30,3.3795388],[31,0],[32,1.0012541],[33,0],[34,3.337371],[35,0],[36,1.9380312],[37,5.1850041],[38,0],[39,7.498875],[40,1.3827816],[41,0],[42,0.1267939],[43,0],[44,1.283414],[45,0],[46,0],[47,0],[48,0.4707431],[49,0.3506869],[50,1.9753495]],

	//ATM per 100,000 adults
	7:[[0,36.85283],[1,0],[2,17.5295],[3,21.45729],[4,112.0603],[5,0],[6,0],[7,4.192714],[8,58.74468],[9,0],[10,29.56066],[11,181.5181],[12,27.10845],[13,12.79711],[14,0],[15,27.21355],[16,0.1412445],[17,4.772521],[18,21.85111],[19,23.38423],[20,7.288207],[21,14.44014],[22,22.24765],[23,8.282934],[24,6.683134],[25,1.432145],[26,2.653692],[27,0],[28,0],[29,39.0878],[30,44.79679],[31,15.10017],[32,5.088341],[33,30.51299],[34,1.805189],[35,0],[36,4.061414],[37,40.56011],[38,0],[39,22.25634],[40,14.24551],[41,0.4627369],[42,1.141145],[43,52.40524],[44,18.6808],[45,3.436913],[46,71.32337],[47,0],[48,3.289008],[49,30.58769],[50,6.353549]],
	
	//ATM per 100,000 adults
	8:[[0,36.85283],[1,0],[2,17.5295],[3,21.45729],[4,112.0603],[5,0],[6,0],[7,4.192714],[8,58.74468],[9,0],[10,29.56066],[11,181.5181],[12,27.10845],[13,12.79711],[14,0],[15,27.21355],[16,0.1412445],[17,4.772521],[18,21.85111],[19,23.38423],[20,7.288207],[21,14.44014],[22,22.24765],[23,8.282934],[24,6.683134],[25,1.432145],[26,2.653692],[27,0],[28,0],[29,39.0878],[30,44.79679],[31,15.10017],[32,5.088341],[33,30.51299],[34,1.805189],[35,0],[36,4.061414],[37,40.56011],[38,0],[39,22.25634],[40,14.24551],[41,0.4627369],[42,1.141145],[43,52.40524],[44,18.6808],[45,3.436913],[46,71.32337],[47,0],[48,3.289008],[49,30.58769],[50,6.353549]],

	//POS per thousand sq km
	9:[[0,0],[1,0],[2,0],[3,6.433399],[4,375.5638],[5,0],[6,0],[7,18.72309],[8,83.56036],[9,0],[10,124.7174],[11,1105.719],[12,0],[13,0],[14,0],[15,1032.674],[16,0],[17,0],[18,302.0935],[19,0],[20,175.5465],[21,107.9075],[22,1231.948],[23,0],[24,0],[25,0.3218439],[26,3.613945],[27,0],[28,0],[29,3667.488],[30,229.8372],[31,2.396425],[32,5.936061],[33,5.429436],[34,0],[35,0],[36,66.15945],[37,0],[38,0],[39,8.421875],[40,0],[41,3.810296],[42,0.6702039],[43,24728.07],[44,33.02325],[45,4.283134],[46,0],[47,0],[48,3.708777],[49,39.99543],[50,1.195873]],
	//POS penetration (per 100,000 adults)
	10:[[0,0],[1,0],[2,0],[3,288.6837],[4,2247.41],[5,0],[6,0],[7,34.13034],[8,486.0691],[9,0],[10,441.0639],[11,1695.31],[12,0],[13,0],[14,0],[15,520.8304],[16,0],[17,0],[18,414.69],[19,0],[20,67.05605],[21,117.8912],[22,708.4204],[23,0],[24,0],[25,1.432145],[26,4.444607],[27,0],[28,0],[29,763.8023],[30,592.1377],[31,194.1303],[32,38.31028],[33,337.6066],[34,0],[35,0],[36,48.97994],[37,0],[38,0],[39,53.96387],[40,0],[41,1.672972],[42,1.521526],[43,89086.84],[44,80.99767],[45,16.13818],[46,0],[47,0],[48,4.527806],[49,272.7565],[50,13.10512]]
			};
	

$(document).ready(function() {
	$('.dropdown-toggle').dropdown()
	// $('#layer1').click(function(){
	// 	buildMap('http://a.tiles.mapbox.com/v3/newamerica.gssp.jsonp');
	// 	$('li').removeClass('active');
	// 	$(this).toggleClass('active');
	// });
	// $('#layer2').click(function(){
	// 	buildMap('http://a.tiles.mapbox.com/v3/newamerica.gssp-country-mapping.jsonp');
	// 	$('li').removeClass('active');
	// 	$(this).toggleClass('active');
	// });
	// $('#layer3').click(function(){
	// 	buildMap('http://a.tiles.mapbox.com/v3/newamerica.gssp-fl.jsonp');
	// 	$('li').removeClass('active');
	// 	$(this).toggleClass('active');
	// });
	// $('#layer4').click(function(){
	// 	buildMap('http://a.tiles.mapbox.com/v3/newamerica.gssp-mobile.jsonp');
	// 	$('li').removeClass('active');
	// 	$(this).toggleClass('active');
	// });
	

	//Make the graphs with labels from dataLabels	
	for(i=0;i<11;i++){
		$('#graphHolder').append('<h4 class="dotBorder">'+dataLabels[i][1]+'</h4><div id="container'+i+'" class="graph" style="width:400px; height:100px; margin: 0 auto;"></div>');
		var e = $('#container'+i+'.graph');
		var plot = $.plot(e, [ data[i] ], options);
		var previousPoint = null;
	    $('#container'+i+'.graph').bind("plothover", function (event, pos, item) {
	        $("#x").text(pos.x.toFixed(2));
	        $("#y").text(pos.y.toFixed(2));
	       	if (item) {
               	if (previousPoint != item.dataIndex) {
                    previousPoint = item.dataIndex;

                    $("#tooltip").remove();
                    var x = item.datapoint[0].toFixed(0),
                        y = item.datapoint[1].toFixed(2);
                    showTooltip(item.pageX, item.pageY, countryLabels[x][1] +': '+ y);
                }
           	}
	    });
	var divId = '#layer'+i;
	$('#mapContainer').append('<div id="map'+i+'"class="map span12"></div>');
	var layerUrl = dataLabels[i][2];
	var mapId = '#map'+i
	// buildMap(layerUrl, 'map'+i);
	
		$(divId).click(function(e){
			newId = $(this).attr('id').replace('layer','');
			newMap(newId);		
		});
	}
	function showTooltip(x, y, contents) {
	        $('<div id="tooltip">' + contents + '</div>').css( {
	            position: 'absolute',
	            display: 'none',
	            top: y +10,
	            left: x + 20,
	            border: '1px solid #ccc',
	            padding: '2px',
	            'background-color': '#eee',
	            opacity: 0.80
	        }).appendTo("body").fadeIn(200);
	    }
});

function newMap(layerId){
	$('li').removeClass('active');
	buildMap(dataLabels[layerId][2], 'map'+layerId);
	$('.map').removeClass('activeMap');
	$('#layer'+layerId).toggleClass('active');
	$('#map'+layerId).addClass('activeMap');
	$('#map'+layerId).fadeId();
	$('.map').css('display','none');	
}


	
</script>
<style>
.custom-pills{
	margin-bottom:5px;
}
.custom-pills li a{
	color:#08C;
	background:#000;
}

.dotBorder{
	border-bottom:1px dotted #d4d4d4;
}

#layerSwitcher{
	border-bottom:2px solid #333;
	border-top:2px solid #333;
	box-shadow:-10px 0px 5px #fff, 10px 0px 5px #fff,-1px -1px 4px #666;
	position:relative;
	padding-left:20px;
}

.dropdown-menu li a{
	background:#fff;
}
</style>
<title>Payment Infrastructure</title>
</head>
<body>
	
	<div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
			<h1><a href="#">Payment Infrastructure</a></h1>
		</div>
	  </div>
	</div>
	<div id="mapContainer" class="row-fluid">
		<div id="mainMap" class="map span12 activeMap"></div>
	</div>
	<div class="container-fluid">
		
	</div>
	<div id="infoBox" class="infoBar row-fluid">
		
		<div id="layerSwitcher" class="span12 navbar-inner">
			<ul class="nav nav-pills custom-pills">
				<li id="layerMain" class="active"><a href="#">Payment Infrastructure</a></li>
				<li id="layer0"><a href="#">Composite Financial Access</a></li>
				<li id="layer1"><a href="#">Financial Literacy</a></li>
				<li id="layer2"><a href="#">Mobile Penetration</a></li>
			  	<li class="dropdown">
			    	<a class="dropdown-toggle" data-toggle="dropdown" href="#">Commercial Banks<b class="caret"></b></a>
			    	<ul class="dropdown-menu">
			      		<li id="layer3"><a href="#">Sq Km</a></li>
						<li id="layer4"><a href="#">1000 Adults</a></li>
			    	</ul>
			  	</li>
				<li class="dropdown">
			    	<a class="dropdown-toggle" data-toggle="dropdown" href="#">Alternative Financial Institutions<b class="caret"></b></a>
			    	<ul class="dropdown-menu">
			      		<li id="layer5"><a href="#">Sq Km</a></li>
						<li id="layer6"><a href="#">1000 Adults</a></li>
			    	</ul>
			  	</li>
				<li class="dropdown">
			    	<a class="dropdown-toggle" data-toggle="dropdown" href="#">ATM<b class="caret"></b></a>
			    	<ul class="dropdown-menu">
			      		<li id="layer7"><a href="#">Sq Km</a></li>
						<li id="layer8"><a href="#">1000 Adults</a></li>
			    	</ul>
			  	</li>
				<li class="dropdown">
			    	<a class="dropdown-toggle" data-toggle="dropdown" href="#">POS<b class="caret"></b></a>
			    	<ul class="dropdown-menu">
			      		<li id="layer9"><a href="#">Sq Km</a></li>
						<li id="layer10"><a href="#">1000 Adults</a></li>
			    	</ul>
			  	</li>
			</ul>
		</div>
	</div>
	<div class="container-fluid">
				<div id="mainText" class="row-fluid">
			<span class="span4 pull-left">
				<h2>Intro to Payment Infrastructure</h2>
				<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
				</span>
			<span class="span8 pull-right">
				<h3>Some Descriptive Stuff</h3>
				<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
				<h4>Here are some graphs</h4>
				<span id="graphHolder"></span>
			</span>
		</div>
		<div class="row-fluid">
			
		</div>
	</div>
</body>
</html>