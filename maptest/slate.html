<!DOCTYPE html>
<html xmlns:og="http://opengraphprotocol.org/schema/" xmlns:fb="http://www.facebook.com/2008/fbml">
<head>
<title>Slate map test</title>
<link rel="stylesheet" type="text/css" href="slate_files/blogs.css">

<script type="text/javascript" src="slate_files/jquery.js"></script> 
<script type="text/javascript" src="scripts/jquery-ui-1.8.17.custom/js/jquery-ui-1.8.17.custom.min.js"></script> 
<link rel="stylesheet" type="text/css" href="scripts/jquery-ui-1.8.17.custom/css/smoothness/jquery-ui-1.8.17.custom.css">
 
<script type="text/javascript" language="javascript" src="slate_files/header.js"></script>
<script src="slate_files/cleanprint.js" name="cleanprintloader" type="text/javascript"></script>

<link rel="stylesheet" type="text/css" href="styles/controls.css">
<link rel="stylesheet" type="text/css" href="styles/motw_studentloans.css">
<script src='scripts/modestmaps.min.js' type='text/javascript'></script>
<script src='scripts/wax.mm.js' type='text/javascript'></script>
<script src='scripts/easey.js' type='text/javascript'></script>
<script src='scripts/mapInit2.js' type='text/javascript'></script>
<script type="text/javascript" src="scripts/highcharts/highcharts.js"></script>
<script type="text/javascript" src="scripts/highcharts/themes/transparent.js"></script>
<style>
	.activeMap{
		z-index:100;
	}
</style>

<script>
var userCenter, userZoom;	
	$(document).ready(function(){
			var tileSets ={
				'map0':'http://a.tiles.mapbox.com/v3/mapbox.world-blank-light,newamerica.motw_studentloan.jsonp',
				'map1':'http://a.tiles.mapbox.com/v3/mapbox.world-blank-light,newamerica.motw_studentloan_10000.jsonp',
				'map2':'http://a.tiles.mapbox.com/v3/mapbox.world-blank-light,newamerica.motw_studentloan_15000.jsonp',
				'map3':'http://a.tiles.mapbox.com/v3/mapbox.world-blank-light,newamerica.motw_studentloan_20000.jsonp',
				'map4':'http://a.tiles.mapbox.com/v3/mapbox.world-blank-light,newamerica.motw_studentloan_25000.jsonp',
				'map5':'http://a.tiles.mapbox.com/v3/mapbox.world-blank-light,newamerica.motw_studentloan_30000.jsonp'
			};
			
			newWaxMap2('http://a.tiles.mapbox.com/v3/mapbox.world-blank-light,newamerica.motw_studentloan.jsonp','mainMap',38, -93, 4, 9);

		$( "#slider" ).slider({
			value:0,
			min: 0,
			max: 5,
			step: 1,
			stop: function( event, ui) {
				var mapDivId='';
				mapDivId = 'map'+ui.value;
				
				
				for(divName in tileSets){
					$('#'+divName).empty();
						newWaxMap2(tileSets[divName],divName,38, -93, 4, 9);
				}
				
				$('.activeMap').fadeOut(100, function(){
					$('.activeMap').css('z-index',-1).show();
					$('.activeMap').removeClass('activeMap');
					$('#'+mapDivId).addClass('activeMap');
					$('.activeMap').css('z-index',900).fadeIn(200, function(){
						$('#mainMap').css('z-index',-1);	
						$('#mainMap-layers').remove();
					});			
				});
			},
			slide: function( event, ui) {
				var mapDivId='';
				console.log(ui.value)
				mapDivId = 'map'+ui.value;
				$('.wax-legends').remove();
				$('.zoomer').remove();	
				$('.wax-popup').remove();
				newWaxMap2(tileSets[mapDivId],'mainMap',38, -93, 4, 9);
			}
		});
			
	});
	
	function newWaxMap2(url, mapContainer, startLat, startLng, minZoom, maxZoom){
	
		minZoom = minZoom || 2;
		maxZoom = maxZoom || 10;
		startLat = startLat || 0;
		startLng = startLng || 0;
		var m;
		wax.tilejson(url, function(tilejson) {
			tilejson.minzoom = minZoom;
			tilejson.maxzoom = maxZoom;
			var mm = com.modestmaps;
			m = new mm.Map(mapContainer,
			new wax.mm.connector(tilejson));

			wax.mm.interaction(m, tilejson);
			wax.mm.legend(m, tilejson).appendTo(m.parent);
			wax.mm.zoomer(m, tilejson).appendTo(m.parent);
		
			if(userCenter && userZoom){
				m.setCenterZoom(userCenter, userZoom);			
			}else{
				m.setCenterZoom(new mm.Location(startLat, startLng), minZoom);
				//add the slow zoom in using easey
			}
			m.addCallback('panned', function(m) {
			    // respond to new center: set vars so map will stay put as the layers change
				userCenter = m.getCenter();
				userZoom = m.getZoom();	
			});
			
			m.addCallback('zoomed', function(m) {
			    // respond to new center: set vars so map will stay put as the layers change
				userCenter = m.getCenter();
				userZoom = m.getZoom();	
			});
		});
	}; //end newWaxMap
	
</script>
      
</head>
<body data-rendering="true">

		<div id="wrapper">
			<div class="sl-content-wrapper">
<div class="clearing"></div>

<header>
<div class="ht5-header">
  <div class="clearing"></div>
	<div class="sl-header-branding">
	  <a href="http://www.slate.com/" class="sl-header-logo sl-sprite-hp sl-block-item"><img src="http://www.slate.com/etc/designs/slate/images/sl-logo.gif" /></a>
	</div>
<div class="clearing"></div>
			<!-- SITE NAVIGATION -->
			<div class="sl-nav-cntr">
				<dl class="sl-nav">
				</dl>
				<div class="clearing"></div>
			</div>
	<div class="clearing"></div>
	<div class="sl-header-wedge"></div>
</div>
</header>

        <div class="sl-body-wrapper">
			<div id="layerControl">
              <div class="inner">
            	<h2>Slide to limit schools by total average loan debt</h2>
				<div id="slider" style="width:400px;"></div>
				<div id="sliderLabel" style="color:#333;padding:5px 0px;">
					<span>All</span>
					<span style="left:58px;">> $10,000</span>
					<span style="left:138px;">> $15,000</span>
					<span style="left:215px;">> $20,000</span>
					<span style="left:295px;">> $25,000</span>
					<span style="left:365px;">> $30,000</span>
				</div>
              </div>
			</div>
		<div id="map0" class="map activeMap" style="width:916px;height:450px;position:absolute;z-index:-1;"></div>
		<div id="map1" class="map" style="width:916px;height:450px;position:absolute;z-index:-1;"></div>
		<div id="map2" class="map" style="width:916px;height:450px;position:absolute;z-index:-1;"></div>
		<div id="map3" class="map" style="width:916px;height:450px;position:absolute;z-index:-1;"></div>
		<div id="map4" class="map" style="width:916px;height:450px;position:absolute;z-index:-1;"></div>
		<div id="map5" class="map" style="width:916px;height:450px;position:absolute;z-index:-1;"></div>
	 	<div id="mainMap" class="map" style="width:916px;height:450px;">
				<!-- <a href='#' class='share'></a>
								<div class='wax-share' style='display:none;'>
								    <div class='share-content'>
								      <h3>Share this map</h3>
								      <strong>Get the embed code</strong><br><small>Copy and paste this HTML into your website or blog.</small>
								      <div id='embed-code-field'><textarea id='embed-code' rows='4' readonly></textarea>
								      </div>
								      <a href='#' class='close'>Close</a>
								    </div>
								
								  </div> -->
		        </div> 
            <div class="clearing"></div>

		 </div>


<footer>
<div class="sl-footer ht5-footer">
  <div class="sl-footer-tsgnav">
    The Slate Group: 
    <a target="_blank" href="http://www.washingtonpost.com/" class="sl-footer-tsgnav-link">The Washington Post</a><span class="sl-nav-pipe"> | </span>
    <a target="_blank" href="http://www.theroot.com/" class="sl-footer-tsgnav-link">The Root</a><span class="sl-nav-pipe"> | </span> 
    <a target="_blank" href="http://www.slatev.com/" class="sl-footer-tsgnav-link">Slate V</a><span class="sl-nav-pipe"> | </span>
    <a target="_blank" href="http://www.foreignpolicy.com/" class="sl-footer-tsgnav-link">Foreign Policy</a>
  </div>
	<div class="sl-footer-links-cntr">
	
	
		<a href="http://fray.slate.com/discuss/">the fray</a> | 
		<a href="http://www.slate.com/id/2147070/">about us</a> | 
		<a href="http://www.slate.com/id/2147071/">contact us</a> | 
		<a target="_blank" href="http://www.facebook.com/pages/Slatecom/21516776437"><em>Slate</em> on Facebook</a> | 
	
		<a class="sl-footer-ad-choices" href="http://www.slate.com/id/2111949#privacy">ad choices</a><br><a target="_blank" href="http://help.slate.com/">feedback</a> | 
		<a target="_blank" href="http://help.slate.com/">help</a> | 
		<a href="http://www.slate.com/id/2078020/">advertise</a> | 
		<a target="_blank" href="http://synd.slategrouptech.com/signup/">newsletters</a> | 
		<a href="http://www.slate.com/id/2223104/">mobile</a> | 
		<a href="http://www.slate.com/id/2143116/">make <em>Slate</em> your homepage</a>			 
		<div class="sl-footer-copyright">
			Slate is published by The Slate Group, a Division of the Washington Post Company<br>
			All contents Â© 2012 The Slate Group, LLC. All rights reserved. <a href="http://www.slate.com/id/2111949/">User Agreement and Privacy Policy</a>
		</div><div class=" fb_reset" id="fb-root"><script async="" src="slate_files/all.js"></script><div style="position: absolute; top: -10000px; height: 0pt; width: 0pt;"></div></div>
	</div>
</div>
</footer>

                
                




                
			</div>
		</div>